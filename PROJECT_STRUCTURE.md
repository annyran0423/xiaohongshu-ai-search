# ğŸ“ å°çº¢ä¹¦ AI æœç´¢é¡¹ç›®ç»“æ„åˆ†æ

## ğŸ¯ **é¡¹ç›®æ¦‚è§ˆ**

è¿™æ˜¯ä¸€ä¸ª**å°çº¢ä¹¦ AI æœç´¢ç³»ç»Ÿ**ï¼ŒåŒ…å«åç«¯æ•°æ®å¤„ç†å’Œå‰ç«¯æœç´¢ç•Œé¢ã€‚

---

## ğŸ—ï¸ **å½“å‰ç›®å½•ç»“æ„**

```
xiaohongshu-ai-search/
â”œâ”€â”€ ğŸ“ search-frontend/          # âœ… Next.js å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts        # æœç´¢æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ dashscope.ts     # å‘é‡åŒ–æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ dashvector.ts    # å‘é‡æœç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ env.ts           # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ types/               # TypeScriptç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ api.ts           # APIç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts             # æœåŠ¡å¯¼å‡º
â”‚   â”œâ”€â”€ src/app/
â”‚   â”‚   â”œâ”€â”€ api/search/route.ts  # API Routesï¼ˆè°ƒç”¨backendæœåŠ¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ page.tsx             # ä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ layout.tsx           # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ src/components/
â”‚   â”‚   â”œâ”€â”€ SearchForm.tsx       # æœç´¢è¡¨å•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SearchResults.tsx    # æœç´¢ç»“æœç»„ä»¶
â”‚   â”œâ”€â”€ .env.local               # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
# å·²åˆ é™¤ç©ºçš„ xhs-search-ui ç›®å½• âœ…
# å·²åˆ é™¤æœªä½¿ç”¨çš„ Express åç«¯ç›®å½• âœ…

â”œâ”€â”€ ğŸ“ scripts/                  # ğŸ› ï¸ ä¾¿æ·è„šæœ¬
â”‚   â”œâ”€â”€ start-frontend.sh        # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
â”‚   â””â”€â”€ demo-docker-mongodb.sh   # Dockeræ¼”ç¤º
â”‚
â”œâ”€â”€ ğŸ“ api/                      # âš ï¸ æ—§ç‰ˆ APIï¼ˆå¯èƒ½åºŸå¼ƒï¼‰
â”œâ”€â”€ ğŸ“ notes/                    # ğŸ“„ å°çº¢ä¹¦ç¬”è®°æ•°æ®
â”œâ”€â”€ ğŸ“ docs/                     # ğŸ“š é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ .env                      # ğŸ”‘ æ ¹ç›®å½•ç¯å¢ƒå˜é‡
â””â”€â”€ ğŸ“„ README.md                 # ğŸ“‹ é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## ğŸ” **æ–‡ä»¶å…³ç³»åˆ†æ**

### **1. ä¸»è¦å·¥ä½œé¡¹ç›®ï¼š`search-frontend/`**

```bash
# å½“å‰æ­£åœ¨ä½¿ç”¨çš„é¡¹ç›®
cd search-frontend/
npm run dev  # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```

**åŒ…å«ï¼š**

- âœ… **å®Œæ•´çš„ AI æœç´¢ç•Œé¢**
- âœ… **æœåŠ¡ç«¯ API è·¯ç”±** (`/api/search`)
- âœ… **React ç»„ä»¶** (SearchForm, SearchResults)
- âœ… **ç¯å¢ƒå˜é‡é…ç½®** (`.env.local`)

### **2. ç©ºé¡¹ç›®å·²åˆ é™¤** âœ…

**å·²åˆ é™¤ï¼š** `xhs-search-ui/` ç›®å½•ï¼ˆç©ºçš„ Next.js æ¨¡æ¿é¡¹ç›®ï¼‰

### **3. åç«¯æœåŠ¡ï¼š`backend/`** âœ…

```bash
# æ•°æ®å¤„ç†å’Œå‘é‡åŒ–è„šæœ¬
./scripts/run-batch-vectorize.sh    # æ‰¹é‡å¤„ç†æ•°æ®
./scripts/run-init-collection.sh    # åˆå§‹åŒ–å‘é‡æ•°æ®åº“
```

**åŒ…å«ï¼š**

- ğŸ”§ **æ•°æ®å¤„ç†è„šæœ¬** (`backend/scripts/`)
- ğŸ”§ **å‘é‡æœåŠ¡å·¥å…·** (`backend/services/`)
- ğŸ”§ **æ•°æ®åº“è¿æ¥å’Œæ¨¡å‹** (`backend/models/`)
- ğŸ› ï¸ **ä¾¿æ·è¿è¡Œè„šæœ¬** (`scripts/`)

---

## ğŸ§¹ **ç›®å½•æ¸…ç†å»ºè®®**

### **ğŸ“‹ æ¨èçš„æ¸…ç†æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆ 1ï¼šä¿ç•™ä¸»è¦é¡¹ç›®ï¼ˆæ¨èï¼‰**

```
xiaohongshu-ai-search/
â”œâ”€â”€ ğŸ“ search-frontend/    # ä¸»è¦å‰ç«¯é¡¹ç›® âœ…
â”œâ”€â”€ ğŸ“ src/               # åç«¯æœåŠ¡ âœ…
â”œâ”€â”€ ğŸ“ notes/             # æ•°æ®æ–‡ä»¶ âœ…
â”œâ”€â”€ ğŸ“ docs/              # æ–‡æ¡£ âœ…
â”œâ”€â”€ ğŸ“„ .env               # ç¯å¢ƒå˜é‡ âœ…
â””â”€â”€ âŒ xhs-search-ui/     # åˆ é™¤æ­¤ç›®å½•
```

#### **æ–¹æ¡ˆ 2ï¼šå®Œå…¨é‡æ„ï¼ˆå¦‚æœéœ€è¦ï¼‰**

```
xiaohongshu-ai-search/
â”œâ”€â”€ ğŸ“ frontend/          # é‡å‘½å search-frontend
â”œâ”€â”€ ğŸ“ backend/           # é‡å‘½å src
â”œâ”€â”€ ğŸ“ data/              # é‡å‘½å notes
â”œâ”€â”€ ğŸ“ docs/
â””â”€â”€ ğŸ“„ .env
```

---

## ğŸš€ **ä½¿ç”¨æŒ‡å—**

### **å½“å‰æ¨èçš„å·¥ä½œæµç¨‹ï¼š**

```bash
# 1. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
./scripts/start-frontend.sh

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
cd search-frontend/
npm run dev

# 2. å¦‚æœéœ€è¦å¤„ç†æ•°æ®
./scripts/run-batch-vectorize.sh     # æ‰¹é‡å‘é‡åŒ–
./scripts/run-init-collection.sh     # åˆå§‹åŒ–å‘é‡é›†åˆ

# 3. è®¿é—®æœç´¢ç•Œé¢
# http://localhost:3000
```

### **å¼€å‘æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š**

1. **ç¯å¢ƒå˜é‡é…ç½®**

   - æ ¹ç›®å½•ï¼š`.env` (åç«¯æœåŠ¡ç”¨)
   - å‰ç«¯ç›®å½•ï¼š`search-frontend/.env.local` (å‰ç«¯é¡¹ç›®ç”¨)

2. **æ•°æ®æµå‘**
   ```
   MongoDB â†’ åç«¯è„šæœ¬ â†’ DashVector â†’ å‰ç«¯æœç´¢ â†’ ç”¨æˆ·
   ```

---

## ğŸ› ï¸ **æ¸…ç†å‘½ä»¤**

### **åˆ é™¤ç©ºé¡¹ç›®ï¼š**

```bash
# åˆ é™¤ç©ºçš„ xhs-search-ui ç›®å½•
rm -rf xhs-search-ui/

# æ¸…ç† git è®°å½•ï¼ˆå¦‚æœéœ€è¦ï¼‰
git rm -r --cached xhs-search-ui/
```

### **é‡å‘½åç›®å½•ï¼ˆå¯é€‰ï¼‰ï¼š**

```bash
# å°† search-frontend é‡å‘½åä¸º frontend
mv search-frontend frontend

# å°† src é‡å‘½åä¸º backend
mv src backend
```

---

## ğŸ¯ **æ€»ç»“**

### **âœ… å½“å‰çŠ¶æ€ï¼ˆå·²æ¸…ç†å®Œæˆï¼‰**

- `search-frontend/` - **ä¸»è¦å‰ç«¯é¡¹ç›®ï¼Œå®Œå…¨å¯ç”¨** âœ…
- `backend/` - **åç«¯æœåŠ¡ï¼Œé‡æ„å®Œæˆ** âœ…
- `scripts/` - **ä¾¿æ·è„šæœ¬ï¼Œæ–°å¢** âœ…
- `xhs-search-ui/` - **å·²åˆ é™¤** âœ…

### **ğŸ¯ é¡¹ç›®ç‰¹ç‚¹**

1. **ğŸ—ï¸ æ¸…æ™°çš„æ¶æ„åˆ†ç¦»**

   - å‰ç«¯ï¼š`search-frontend/`
   - åç«¯ï¼š`backend/`
   - è„šæœ¬ï¼š`scripts/`

2. **ğŸš€ ä¾¿æ·çš„æ“ä½œæ–¹å¼**

   - `./scripts/start-frontend.sh` - å¯åŠ¨å‰ç«¯
   - `./scripts/run-batch-vectorize.sh` - æ•°æ®å¤„ç†
   - `./scripts/cleanup.sh` - é¡¹ç›®æ¸…ç†
